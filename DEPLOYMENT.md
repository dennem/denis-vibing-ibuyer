# IBuyer Thailand - Railway Deployment Guide

## ğŸ“‹ Prerequisites

1. Create a Railway account at [railway.app](https://railway.app)
2. Install Railway CLI (optional but recommended):
   ```bash
   brew install railway
   ```

## ğŸš€ Deployment Steps

### Step 1: Prepare Your Repository

1. Initialize git repository (if not already done):
   ```bash
   git init
   git add .
   git commit -m "Initial commit for Railway deployment"
   ```

2. Create a GitHub repository and push your code:
   ```bash
   git remote add origin https://github.com/yourusername/ibuyer-thailand.git
   git push -u origin main
   ```

### Step 2: Create Railway Project

1. Log into Railway Dashboard
2. Click "New Project"
3. Select "Deploy from GitHub repo"
4. Connect your GitHub account and select your repository

### Step 3: Configure Environment Variables

In Railway dashboard, go to your project settings and add these variables:

```env
# Database (Railway auto-provisions this)
DATABASE_URL=(auto-generated by Railway)

# Security
SECRET_KEY=generate-a-secure-random-key-here
DEBUG=false

# Application
FRONTEND_URL=https://your-app-name.railway.app
PORT=8000
```

To generate a secure SECRET_KEY:
```python
import secrets
print(secrets.token_urlsafe(32))
```

### Step 4: Add PostgreSQL Database

1. In Railway dashboard, click "New" â†’ "Database" â†’ "Add PostgreSQL"
2. Railway will automatically set the DATABASE_URL environment variable

### Step 5: Deploy

Railway will automatically deploy when you push to GitHub. You can also trigger manual deploys from the dashboard.

## ğŸ”§ Configuration Files Created

- **railway.json** - Railway deployment configuration
- **nixpacks.toml** - Build configuration for Railway
- **config.py** - Centralized environment configuration
- **.env.example** - Environment variables template
- **start.sh** - Production start script

## ğŸŒ Environment Management

### Development Environment (Local)
- Database: PostgreSQL on localhost
- Frontend: http://localhost:5173
- Backend: http://localhost:8000

### Production Environment (Railway)
- Database: Railway PostgreSQL
- Application: https://your-app.railway.app
- All traffic goes through the FastAPI backend

## ğŸ”’ Security Best Practices

1. **Never commit secrets** - Use environment variables
2. **Generate strong SECRET_KEY** for production
3. **Set DEBUG=false** in production
4. **Use HTTPS** (Railway provides this automatically)
5. **Keep dependencies updated** regularly

## ğŸ“Š Monitoring

Railway provides:
- Automatic HTTPS/SSL
- Deployment logs
- Resource usage metrics
- Automatic restarts on failure

## ğŸš¨ Troubleshooting

### Common Issues:

1. **Build fails**: Check `requirements.txt` and `package.json`
2. **Database connection fails**: Verify DATABASE_URL is set correctly
3. **Frontend 404 errors**: Ensure static files are built with `npm run build`
4. **CORS errors**: Check FRONTEND_URL environment variable

### Useful Commands:

```bash
# View logs
railway logs

# Run database migrations
railway run python backend/main.py

# Connect to production database
railway connect postgresql
```

## ğŸ“ˆ Scaling Considerations

When ready to scale:
1. Add a staging environment
2. Implement CI/CD pipelines
3. Add monitoring (Sentry, DataDog)
4. Consider CDN for static assets
5. Add Redis for caching

## ğŸ”„ Next Steps After Deployment

1. Test all functionality in production
2. Set up domain name (Railway supports custom domains)
3. Configure email service (SendGrid, AWS SES)
4. Set up backups for PostgreSQL
5. Add monitoring and error tracking

## ğŸ“ Support

- Railway Documentation: https://docs.railway.app
- Railway Discord: https://discord.gg/railway
- GitHub Issues: Your repository issues page